---
title: Chapter 5. 데이터 파고들기
author: BeAPro
date: 2024-07-18 13:20:00 +0900
categories: [Study,Spring Boot]
tags: [Spring Boot, JPA]
image:
  path: /assets/img/title-image/springBoot.png
  alt: SpringBoot

published: false
---

스프링데이터의 미션은 `기본적인 데이터 저장의 특수한 속성을 유지하면서 데이터에 액세스하는 친숙하고 일관된 스프링 기반 프로그래밍 모델을 제공하는 것`이라고 한다. 어떤 데이터베이스 엔진이나 플랫폼을 사용하든 간에 스프링 데이터의 목표는 개발자가 가능한 한 간단하고 강력하게 데이터에 액세스하게 하는 것이다.

## **엔티티 정의**

스프링 데이터는 다양한 복잡성(추상성) 수준에서 스프링 부트 애플리케이션이 사용할 수 있는 다양한 메커니즘과 데이터 액세스 옵션을 제공한다. 개발자가 특정한 사용사례에서 어느 수준의 복잡성을 사용하기로 정하든 간에, 어떤 형태로든 첫 단계는 적용 가능한 데이터를 처리하는 데 사용할 도메인 클래스를 정의하는 일이다.

`도메인 클래스`는 그 연관성과 중요성이 다른 데이터와 독립적인 기본 도메인 엔티티이다. 도메인 클래스가 다른 도메인 엔티티와 관련 없다는 뜻은 아니다. 도메인 클래스는 다른 엔티티와 연결되지 않은 때에도 단독으로 존재하고 그 자체로 의미있다는 뜻이다.

스프링에서 자바를 사용해 도메인 클래스를 생성하기 위해 멤버 변수, 생성자, 접근자, 변경자 등이 있는 클래스를 생성할 수 있다. 자바와 함께 롬복을 사용하면 데이터 클래스를 사용해 데이터를 표현하고, 저장하고, 검색하는 도메인 클래스를 생성할 수 있다.

도메인 클래스를 하나 정의한 후에 데이터 사용 범위, 클라이언트가 사용되는 외부 API, DB 종류를 고려해 데이터베이스와 추상화 수준을 정한다. 스프링 생태계에서 이러한 작업을 할 때는 보통 두 가지 옵견, 즉 템플릿과 repository 중 하나를 사용한다.

## **템플릿 지원**

충분히 높은 수준의 일관된 추상화를 제공하기 위해, 스프링 데이터는 대부분의 다양한 데이터 소스에 `Operations` 타입의 인터페이스를 정의한다. `Operations` 타입의 인터페이스(예: MongoOperations, RedisOperations, CassandraOperations)는 최선의 유연성을 위해 바로 사용하거나 더 높은 수준의 추상화를 설정할 수 있는 기본적인 오퍼레이션이 정의됐고, Template 클래스에 Operations 인터페이스가 구현됐다.

일반적인 패턴의 데이터 액세스에서는 템플릿보다 repository가 더 좋은 옵션이 된다. repository가 템플릿을 기반으로 하기 때문에 추상화를 더 높이더라도 잃을 게 없다.

## **저장소 지원**

스프링 데이터가 `Repository` 인터페이스를 정의하고, 이 인터페이스로부터 그 외 모든 유형의 스프링 데이터 repository 인터페이스가 파생된다. 다양한 repository 인터페이스는 `findAll()`, `findById()`, `count()`, `delete()`, `deleteAll()` 등과 같은 융용한 상위 수준 함수를 지정한다. 또한, repository에는 블로킹과 논블로킹 상호작용이 모두 정의됐다.


## **JPA로 repository 기반 서비스 만들기**

스프링 생태계의 강점 하나는 일관성이다. 즉, 스프링 생태계에서는 일단 무언가를 제대로 하는 법을 익히고 나면, 다른 구성에서도 동일한 접근방식을 적용해 성공적인 결과를 얻는다. 스프링 부트와 스프링 데이터는 JPA-호환 데이터베이스, 다양한 유형의 많은 NoSQL 데이터 repository, 인메모리, 영구 repository 등 수많은 데이터 베이스의 저장이 가능한 repository를 지원한다. 스프링은 단일 애플리케이션이든 방대한 데이터베이스 시스템이든 상관없이 데이터베이스를 전환할 때 개발자가 겪는 고충을 덜어준다.

